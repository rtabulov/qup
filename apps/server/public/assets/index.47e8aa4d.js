var D=Object.defineProperty;var v=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var E=(a,u,e)=>u in a?D(a,u,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[u]=e,x=(a,u)=>{for(var e in u||(u={}))S.call(u,e)&&E(a,e,u[e]);if(v)for(var e of v(u))U.call(u,e)&&E(a,e,u[e]);return a};import{b as q,U as N,N as V,g as $,j as t,h as n,i,w as g,Q as F,s as p,u as L,V as R,o as j}from"./vendor.75481ff1.js";import{_ as k}from"./AppInput.2110be0f.js";import{_ as A}from"./AppButton.c4435c9b.js";import{h as H,e as I,b as B,m as M,_ as Q}from"./index.902c9b9c.js";const T={class:"text-center"},z=n("h1",{class:"text-3xl"},"\u0412\u0445\u043E\u0434",-1),G=["onSubmit"],J=p("\u0412\u043E\u0439\u0442\u0438"),K={class:"mt-2"},O=p(" \u0415\u0449\u0435 \u043D\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u044B? "),P=p("\u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043B\u0430\u0442\u044C \u044D\u0442\u043E \u0437\u0434\u0435\u0441\u044C"),W=n("p",{class:"mt-2"},"\u0414\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u0440\u043E\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443",-1),X=q({setup(a){const u=N({email:"",password:""}),e=V({}),l=L(),c=R(),r=H(),d=V(!1);async function C(){var m,s,o,f,_,w,y,b;d.value=!0;try{await M(x({},u)),await r.tryLoggingIn(),console.log((s=(m=r.user)==null?void 0:m.role)==null?void 0:s.key),c.query.backurl?l.push(c.query.backurl):((f=(o=r.user)==null?void 0:o.role)==null?void 0:f.key)==="hr"||((w=(_=r.user)==null?void 0:_.role)==null?void 0:w.key)==="departmentHead"?l.push("/certificates/awaiting-approval"):((b=(y=r.user)==null?void 0:y.role)==null?void 0:b.key)==="admin"?l.push("/users"):l.push("/profile")}catch(h){d.value=!1,h.response&&(e.value=h.response.data)}}return(m,s)=>(j(),$("div",T,[z,t(Q,{center:""}),n("form",{class:"max-w-xl mx-auto space-y-4",onSubmit:F(C,["prevent"])},[t(k,{modelValue:i(u).email,"onUpdate:modelValue":s[0]||(s[0]=o=>i(u).email=o),error:e.value.email,"onUpdate:error":s[1]||(s[1]=o=>e.value.email=o),type:"email",required:"",label:"E-mail"},null,8,["modelValue","error"]),t(k,{modelValue:i(u).password,"onUpdate:modelValue":s[2]||(s[2]=o=>i(u).password=o),error:e.value.password,"onUpdate:error":s[3]||(s[3]=o=>e.value.password=o),type:"password",required:"",label:"\u041F\u0430\u0440\u043E\u043B\u044C"},null,8,["modelValue","error"]),t(A,{disabled:d.value,type:"submit",class:"w-full"},{default:g(()=>[J]),_:1},8,["disabled"]),n("p",K,[O,t(I,{to:"/register"},{default:g(()=>[P]),_:1})]),W],40,G)]))}});typeof B=="function"&&B(X);export{X as default};
